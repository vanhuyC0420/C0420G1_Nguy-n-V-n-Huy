<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>C0420G1</title>
    <script type="text/javascript" src="script.js"></script>
</head>
<body>
<script>
    let listCustomer = [];
    let regexemail = /\S+@\S+\.\S+/;
    let regexBirthday = /^\d{2}[./-]\d{2}[./-]\d{4}$/;
    let regexphone = /^\d+$/;
    function dispalyMainMenu() {
        let choose = parseInt(prompt('1.Thêm khách hàng.' + '\n' +
            '2.Hiển thị thông tin khách hàng' + '\n'+
            '3. Hiển thị tổng tiền cần thanh toán' +'\n'+
            '4.Sửa thông tin khách hàng.' + '\n' +
            '5.Xoá khách hàng.' + '\n' +
            '6.Thoát.'));
        switch (choose) {
            case 1: {
                addNewCustomer();
                break;
            }
            case 3:{
                displayTotalPays();
            }
            default: {
                alert('Sai dồi, chọn lại dùm bạn ơi');
                dispalyMainMenu();
            }
        }
        function addNewCustomer() {
            let checkValid=false;
            let cus = new Customer();
            let name = prompt("Nhập họ tên");
            let idCard = prompt("Nhập số CMND/Căn Cước;");
            let phoneNumber;
            do {
                phoneNumber = prompt("Số điện thoại của bạn:");
                if (regexphone.test(phoneNumber)){
                    checkValid=true;
                }else {
                    alert('Số dt chưa đúng');
                }
            }while (!checkValid)
            checkValid=false;
            let birthday;
            do {
                birthday = prompt("Nhập Ngày sinh: ");
                if (regexBirthday.test(birthday)){
                    checkValid=true;
                }else {
                    alert('Ngày sinh bạn nhập chưa đúng');
                }
            }while (!checkValid)
            checkValid=false;
            let email;
            do {
                email = prompt("Nhập email: ");
                if (regexemail.test(email)){
                    checkValid=true;
                }else {
                    alert('Email bạn nhập không hợp lệ');
                }
            }while (!checkValid)
            checkValid=false;
            let address = prompt("Nhập địa chỉ: ");
            let gender = prompt("Giới tính: ");
            let typeCustomer = prompt('Loại khách hàng');
            let discount = prompt("ĐƯợc giảm giá: ");
            let rentDays = prompt("Số ngày thuê: ");
            let typerService = prompt("Loại dịch vụ: ");
            let quantityIncluded = prompt("Nhập số lượng đi kèm: ");
            let typeRoom = prompt("Loại phòng: ");
            cus.setName(name);
            cus.setIdcard(idCard);
            cus.setPhoneNumber(phoneNumber);
            cus.setBirthday(birthday);
            cus.setEmail(email);
            cus.setAddress(address);
            cus.setGender(gender);
            cus.setTypeCustomer(typeCustomer);
            cus.setDiscount(discount);
            cus.setRentdays(rentDays);
            cus.setTyperServer(typerService);
            cus.setTypeRoom(typeRoom);
            cus.setQuantityIncluded(quantityIncluded);
            listCustomer.push(cus);
            alert('Thêm thông tin khách hàng được rồi đó');
            dispalyMainMenu();
        }
        function displayTotalPays() {
            let tam = "";
            for (let i =0;i<listCustomer.length;i++){
                tam += i + '. Tên :' + listCustomer[i].getName()+'\n';
            }
            let chooseDisplay = parseInt(prompt(tam));
            alert('Tổng tiền của bản'+ listCustomer[chooseDisplay].totalPays());
        }
    }
    dispalyMainMenu();
</script>
</body>
</html>